<!DOCTYPE html>
<html>
<head>
<%include file="../header_inc_v4.html" />
<title>POSX - Cost &amp; Price Tool</title>

<script type="text/javascript">
g_r_id = 0;

function do_cmp(r_id)
{
    g_r_id = r_id;
    g_v_d_tbl_hdr.empty();
    g_v_d_tbl_cnt.empty();
    
    
    get_js_ex('?fn=cmp', {'r_id': r_id}, function(js) {
        var vlst = [];
        for(var i = 0; i < js.users.length; i++) {
            vlst.push( $('<div></div>').text( js.users[i][0] ) );
        }
        g_v_d_tbl_hdr.append( $('<div>Num</div><div>Name</div>') ).append(vlst);
        
        vlst = [];
        for(var i = 0; i < js.items.length; i++) {
            var t = js.items[i];
            
            var v = $('<div class="prntbl_row"></div>')
            .append( $('<div></div>').text(t[0]) )
            .append( $('<div></div>').text(t[1]) );
            
            for(var j = 0; j < js.users.length; j++) {
                v.append( $('<div></div>').text(t[2][j]) )
            }
            
            vlst.push(v);
        }
        g_v_d_tbl_cnt.append(vlst);
        
        
    }, undefined, undefined, undefined, 'do_cmp');
}

$(function() {

g_v_ctrl = $('.x_ctrl');
idx_elements(g_v_ctrl, 5);
var els = g_v_ctrl.data('in_els');

els.btn_upload[0].button();

g_v_d_tbl_hdr = $('#d_tbl .prntbl_row_hdr');
g_v_d_tbl_cnt = $('#d_tbl .prntbl_cnt');


%if r_id:
do_cmp(${r_id});
%endif

});

</script>

<style type="text/css">
.ui-widget {font-size:18px;}
.x_ctrl input, .x_ctrl select {margin-right:10px;}

#d_tbl {top:0;bottom:0;right:0;left:0;z-index:0;overflow:hidden}

.prntbl_row >div:nth-child(1) {width:60px}
.prntbl_row >div:nth-child(2) {width:280px}
.prntbl_row_hdr >div:nth-child(n+3) {color:red}

</style>

</head>
<body>

<div class="x_ctrl">

<input type="button" name="ctrl_btn_upload" value="Upload" />

</div>

<div class="x_body">
<div class="prntbl" id="d_tbl">
<div class="prntbl_row prntbl_row_hdr"></div>
<div class="prntbl_cnt"></div>
<div class="prntbl_row prntbl_row_ftr"></div>
</div>


</div>


</body>
</html>


