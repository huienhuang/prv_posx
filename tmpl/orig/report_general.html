<!DOCTYPE html>
<html>
<head>
<script>posx_enable_chk_login = true;</script>
<%include file="header_inc_v3.html" />
<script type="text/javascript" src="js/canvasjs.min.js"></script>
<title>POSX - General Report</title>

<style type="text/css">
.m_ctrl {min-width:900px}
.m_ctrl input[type="text"] {margin-right:10px}

</style>

<script>

function render_chart(js)
{
    new CanvasJS.Chart('m_body', js.config).render();
}

function load_report()
{
    $('#m_body').empty();
    
    var els = g_v_x_ctrl.data('in_els');
    var idx = els.report[0].val();
    if(!idx) return;
    
    get_js('?fn=get_report', {'idx': idx}, function(js) {
        if(js.type=="chart") render_chart(js);
        
    });
}

$(function() {

g_v_x_ctrl = $('.x_ctrl');
idx_elements(g_v_x_ctrl, 5);

$('.btn', g_v_x_ctrl).button();

var els = g_v_x_ctrl.data('in_els');
els.report[0].change(load_report);

});

</script>

</head>
<body>

<div class="x_ctrl">

<select style="width:300px" name="ctrl_report">
<option value="">-- Select Report Type --</option>
%for r in reports:
<option value="${r[0]}">${r[1]|h}</option>
%endfor
</select>
<input style="margin-left:20px" type="button" value="export" class="btn" name="ctrl_export" />
<input style="margin-left:20px" type="button" value="quit" class="btn" name="ctrl_quit" />

</div>
<div class="x_body" id="m_body">
</div>

</body>
</html>